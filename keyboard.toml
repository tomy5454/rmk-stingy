[keyboard]
name = "urchin-keyboard"
product_name = "Clavier Urchin"
vendor_id = 0xFEED
product_id = 0x0001
manufacturer = "Timoth√©"
board = "nice!nano_v2"

[layout]
rows = 4
cols = 10
layers = 4
matrix_map = """
(0,0,L) (0,1,L) (0,2,L) (0,3,L) (0,4,L)    (0,5,R) (0,6,R) (0,7,R) (0,8,R) (0,9,R)
(1,0,L) (1,1,L) (1,2,L) (1,3,L) (1,4,L)    (1,5,R) (1,6,R) (1,7,R) (1,8,R) (1,9,R)
(2,0,L) (2,1,L) (2,2,L) (2,3,L) (2,4,L)    (2,5,R) (2,6,R) (2,7,R) (2,8,R) (2,9,R)
                       (3,3,L)  (3,4,L)    (3,5,R) (3,6,R)
"""

[[layer]]
name = "base"
keys = """
Q          W          E           R            T    Y U            I           O          P
MT(A,LGui) MT(S,LAlt) MT(D,LCtrl) MT(F,LShift) G    H MT(J,RShift) MT(K,RCtrl) MT(L,LAlt) MT(Semicolon,RGui)
Z          X          C           V            B    N M            Comma       Dot        Slash
                                    TD(0)  Space    Enter  Tab
"""

[[layer]]
name = "navigation"
keys = """
F9          F10         F11          F12           MouseBtn1    Escape    Home            PageDown       PageUp      End
MT(F5,LGui) MT(F6,LAlt) MT(F7,LCtrl) MT(F8,LShift) MouseBtn3    Backspace MT(Left,RShift,NAV) MT(Down,RCtrl,NAV) MT(Up,LAlt,NAV) MT(Right,LGui,NAV)
F1          F2          F3           F4            MouseBtn2    Delete    MouseLeft       MouseDown      MouseUp      MouseRight
                                                   TD(1)  __    __  __   
"""

[[layer]]
name = "programming"
keys = """
WM(Q,RAlt) WM(W,RAlt) WM(E,RAlt) WM(R,RAlt) WM(T,RAlt)    Equal Kc7            Kc8           Kc9          Kc0
TD(4)      TD(5)      TD(6)      TD(7)      WM(H,RAlt)    Quote MT(Kc4,RShift) MT(Kc5,RCtrl) MT(Kc6,LAlt) MT(Minus,RGui)
Grave      WM(X,RAlt) WM(C,RAlt) WM(V,RAlt) Backslash     N     Kc1            Kc2           Kc3          Dot
                                              TD(1)  _    _  TD(3)
"""

[[layer]]
name = "peripherics"
keys = """
User6 User5 No No No    KbVolumeUp      MediaPrevTrack MediaRewind MediaFastForward MediaNextTrack
No    No    No No No    KbVolumeDown    MediaPlayPause MediaStop   MediaSelect      BrightnessUp
No    No    No No No    KbMute          User0          User1       User2            BrightnessDown
               No No    CapsLock        TO(2)
"""

[host]
vial_enabled = false

[storage]
clear_layout = true

[ble]
enabled = true

[behavior.morse]
enable_flow_tap = true
prior_idle_time = "50ms"
permissive_hold = true
hold_on_other_press = false
hold_timeout = "250ms"
gap_timeout = "250ms"
morses = [
    { tap = "TO(1)", hold = "MO(3)" },
    { tap = "TO(0)", hold = "MO(3)" },
    { tap = "Tab", hold = "TO(2)" },
    { tap = "Tab", hold = "RAlt" },
    { tap = "WM(A, RAlt)", hold = "LGui" },
    { tap = "WM(S, RAlt)", hold = "LAlt" },
    { tap = "WM(D, RAlt)", hold = "LCtrl" },
    { tap = "WM(F, RAlt)", hold = "LShift" },
    { tap = "WM(L, RAlt)", hold = "RGui" },
]

[behavior.morse.profiles.NAV]
enable_flow_tap = true
prior_idle_time = "150ms"
permissive_hold = true
hold_on_other_press = false
hold_timeout = "250ms"
gap_timeout = "250ms"

[split]
connection = "ble"

[split.central]
rows = 4
cols = 5
row_offset = 0
col_offset = 0

[split.central.matrix]
row_pins = ["P1_00", "P0_11", "P1_04", "P1_06"]
col_pins = ["P1_15", "P1_13", "P1_11", "P0_10", "P0_09"]

[[split.peripheral]]
rows = 4
cols = 5
row_offset = 0
col_offset = 5

[split.peripheral.matrix]
row_pins = ["P1_13", "P1_11", "P0_10", "P0_09"]
col_pins = ["P0_24", "P1_00", "P0_11", "P1_04", "P1_06"]
